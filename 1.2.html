<!DOCTYPE html>
<html lang="la">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>De Bello Gallico - Analysis Textualis</title>
    
    <style type="text/css">
      /* --- Tailwind CSS Pre-compilado (Preflight & Utilitarios Usados) --- */
      *,::before,::after{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}::before,::after{--tw-content:''}html{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;tab-size:4;font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;font-weight:inherit;line-height:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,[type='button'],[type='reset'],[type='submit']{-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type='search']{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dl,dd,h1,h2,h3,h4,h5,h6,hr,figure,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}ol,ul,menu{list-style:none;margin:0;padding:0}textarea{resize:vertical}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}button, [role="button"]{cursor:pointer}:disabled{cursor:default}img,svg,video,canvas,audio,iframe,embed,object{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]{display:none}
      .container{width:100%}@media (min-width:640px){.container{max-width:640px}}@media (min-width:768px){.container{max-width:768px}}@media (min-width:1024px){.container{max-width:1024px}}@media (min-width:1280px){.container{max-width:1280px}}@media (min-width:1536px){.container{max-width:1536px}}
      .fixed{position:fixed}.absolute{position:absolute}.sticky{position:sticky}.inset-0{top:0;right:0;bottom:0;left:0}.top-0{top:0}.z-30{z-index:30}.z-50{z-index:50}
      .mx-auto{margin-left:auto;margin-right:auto}.mb-8{margin-bottom:2rem}.mb-10{margin-bottom:2.5rem}.mt-2{margin-top:0.5rem}.mr-2{margin-right:0.5rem}.mt-6{margin-top:1.5rem}
      .block{display:block}.inline-flex{display:inline-flex}.flex{display:flex}.h-4{height:1rem}.w-4{width:1rem}.h-5{height:1.25rem}.w-5{width:1.25rem}.h-screen{height:100vh}.w-80{width:20rem}
      .transform{transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}
      .gap-x-1{column-gap:0.25rem}.gap-x-4{column-gap:1rem}.gap-x-6{column-gap:1.5rem}.gap-8{gap:2rem}.gap-12{gap:3rem}
      .overflow-y-auto{overflow-y:auto}.rounded-lg{border-radius:0.5rem}.rounded-md{border-radius:0.375rem}
      .border-b-2{border-bottom-width:2px}.border-stone-300{--tw-border-opacity:1;border-color:rgb(214 211 209 / var(--tw-border-opacity))}
      .bg-stone-50{--tw-bg-opacity:1;background-color:rgb(250 250 249 / var(--tw-bg-opacity))}
      .bg-stone-100{--tw-bg-opacity:1;background-color:rgb(245 245 244 / var(--tw-bg-opacity))}
      .bg-stone-200{--tw-bg-opacity:1;background-color:rgb(231 229 228 / var(--tw-bg-opacity))}
      .bg-white{--tw-bg-opacity:1;background-color:rgb(255 255 255 / var(--tw-bg-opacity))}
      .bg-gray-700{--tw-bg-opacity:1;background-color:rgb(55 65 81 / var(--tw-bg-opacity))}
      .hover\:bg-gray-800:hover{--tw-bg-opacity:1;background-color:rgb(31 41 55 / var(--tw-bg-opacity))}
      .p-4{padding:1rem}.p-6{padding:1.5rem}.p-8{padding:2rem}.px-6{padding-left:1.5rem;padding-right:1.5rem}.py-2{padding-top:0.5rem;padding-bottom:0.5rem}.pb-4{padding-bottom:1rem}.pb-5{padding-bottom:1.25rem}
      .text-center{text-align:center}.text-justify{text-align:justify}
      .text-2xl{font-size:1.5rem;line-height:2rem}.text-3xl{font-size:1.875rem;line-height:2.25rem}.text-5xl{font-size:3rem;line-height:1}
      .text-sm{font-size:0.875rem;line-height:1.25rem}.text-xl{font-size:1.25rem;line-height:1.75rem}
      .font-bold{font-weight:700}.font-semibold{font-weight:600}.leading-relaxed{line-height:1.625}
      .text-gray-500{--tw-text-opacity:1;color:rgb(107 114 128 / var(--tw-text-opacity))}
      .text-gray-600{--tw-text-opacity:1;color:rgb(75 85 99 / var(--tw-text-opacity))}
      .text-gray-700{--tw-text-opacity:1;color:rgb(55 65 81 / var(--tw-text-opacity))}
      .text-gray-800{--tw-text-opacity:1;color:rgb(31 41 55 / var(--tw-text-opacity))}
      .text-white{--tw-text-opacity:1;color:rgb(255 255 255 / var(--tw-text-opacity))}
      .shadow-lg{--tw-shadow:0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}
      .transition{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;-webkit-backdrop-filter:backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}
      .ease-in-out{transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1)}
      .grid{display:grid}.grid-cols-1{grid-template-columns:repeat(1,minmax(0,1fr))}.items-center{align-items:center}.justify-center{justify-content:center}.justify-between{justify-content:space-between}
      .space-y-2>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-top:calc(0.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(0.5rem * var(--tw-space-y-reverse))}
      .space-y-3>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-top:calc(0.75rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(0.75rem * var(--tw-space-y-reverse))}
      @media (min-width:1024px){.lg\:p-12{padding:3rem}.lg\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}}
      
      /* --- Estilos Personalizados --- */
      body{background-color:#f3f0e9;font-family:'Helvetica Neue',Arial,sans-serif;color:#4a4a4a}
      .textum-classicum{font-family:'Georgia','Times New Roman',serif}
      .verbum,.oratio{cursor:pointer;transition:background-color .2s ease-in-out}
      .oratio:hover{background-color:#d8cbad}.verbum:hover{background-color:#eaddc5}
      .activus{background-color:#cbbca7!important;font-weight:700}
      
      /* --- NUEVO LAYOUT ESTÁTICO --- */
      .main-layout {
          display: grid;
          grid-template-columns: 20rem 1fr; /* 20rem para el panel, el resto para el contenido */
          gap: 2rem;
          padding: 2rem;
      }

      #marginalia-sinistra {
          position: sticky; /* Se mantiene fijo al hacer scroll */
          top: 2rem;
          height: calc(100vh - 4rem); /* Altura de la ventana menos el padding */
      }

      #visus-orationis{transition:opacity .3s ease-in-out,transform .3s ease-in-out}
      .occultus{display:none} /* Simplificado para la vista de oración */
      #translatio-tooltip{position:absolute;display:none;padding:.5rem 1rem;background-color:#2d3748;color:#fff;border-radius:.375rem;font-size:.875rem;line-height:1.25rem;max-width:320px;z-index:50;pointer-events:none}
    </style>
</head>
<body class="bg-stone-100">

    <div class="main-layout">
        <!-- Panel de Análisis (siempre visible) -->
        <aside id="marginalia-sinistra" class="bg-white shadow-xl p-6 rounded-lg overflow-y-auto">
            <div id="marginalia-contentus">
                <!-- Contenido por defecto o de análisis se insertará aquí -->
            </div>
        </aside>

        <!-- Contenido Principal -->
        <div id="visus-paragrafi">
            <main>
                <header class="text-center mb-10 border-b-2 border-stone-300 pb-5">
                    <h1 class="text-5xl textum-classicum text-gray-800">De Bello Gallico</h1>
                    <h2 class="text-2xl text-gray-600 mt-2">Liber I, Caput II</h2>
                </header>
                
                <section id="lingua-selector" class="mb-8 p-4 bg-stone-200 rounded-lg flex items-center justify-center gap-x-6">
                    <h3 class="font-bold text-gray-700">Lingua Translationis:</h3>
                    <div class="flex items-center gap-x-4">
                        <label class="flex items-center gap-x-1 cursor-pointer"><input type="radio" name="lingua" value="es" class="h-4 w-4"> Español</label>
                        <label class="flex items-center gap-x-1 cursor-pointer"><input type="radio" name="lingua" value="en" class="h-4 w-4"> English</label>
                        <label class="flex items-center gap-x-1 cursor-pointer"><input type="radio" name="lingua" value="zh" class="h-4 w-4"> 中文</label>
                        <label class="flex items-center gap-x-1 cursor-pointer"><input type="radio" name="lingua" value="ko" class="h-4 w-4"> 한국어</label>
                    </div>
                </section>

                <div id="paragrafus-contentus" class="textum-classicum text-xl leading-relaxed text-justify bg-white p-8 lg:p-12 rounded-lg shadow-lg">
                    <!-- El parágrafo interactivo se generará aquí -->
                </div>
                   <footer class="text-center mt-6 text-sm text-gray-500">
                    <p><i>Preme verbum singulum pro analysi. Preme sententiam totam pro analysi completa. Suspende murem super sententiam pro translatione rapida.</i></p>
                </footer>
            </main>
        </div>
    </div>

    <!-- Vista de Análisis de Oración (oculta por defecto) -->
    <div id="visus-orationis" class="occultus fixed inset-0 bg-stone-50 z-30 p-8 lg:p-16 overflow-y-auto">
        <header class="flex justify-between items-center border-b-2 border-stone-300 pb-4 mb-8">
            <h2 class="text-3xl textum-classicum text-gray-800">Analysis Orationis</h2>
            <button id="button-redire" class="inline-flex items-center px-6 py-2 bg-gray-700 text-white font-bold rounded-md hover:bg-gray-800 transition">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd" />
                </svg>
                Redire ad Textum
            </button>
        </header>
        
        <div id="oratio-analysis-contentus" class="grid grid-cols-1 lg:grid-cols-2 gap-12">
            <div>
                <section class="mb-8">
                    <h3 class="text-xl font-bold text-gray-700 mb-2">Oratio Latina</h3>
                    <p id="oratio-latina-textus" class="textum-classicum text-2xl leading-relaxed bg-white p-4 rounded-md shadow"></p>
                </section>
                <section>
                    <h3 class="text-xl font-bold text-gray-700 mb-3">Translationes</h3>
                    <div class="space-y-3">
                        <div id="translatio-es"></div>
                        <div id="translatio-en"></div>
                        <div id="translatio-zh"></div>
                        <div id="translatio-ko"></div>
                    </div>
                </section>
            </div>
            <div>
                <section>
                    <h3 class="text-xl font-bold text-gray-700 mb-3">Analysis Syntactica</h3>
                    <div id="analysis-syntactica-contentus" class="bg-white p-4 rounded-md shadow space-y-3 text-gray-700"></div>
                </section>
            </div>
        </div>
    </div>
    
    <div id="translatio-tooltip"></div>

    <script>
    document.addEventListener('DOMContentLoaded', () => {

        // --- Datos para el Capítulo II de "De Bello Gallico" ---
        // Nota: Estos datos son parciales y se basan en el fragmento proporcionado y la información de fuentes externas.
        // Un análisis completo de todo el capítulo requeriría una entrada de datos más extensa y estructurada.
        const paragrafus = {
            id: 2,
            orationes: [
                {
                    id_orationis: 'o1_c2',
                    textus_latinus: "Apud Heluetios longe nobilissimus fuit et ditissimus Orgetorix.",
                    translationes: {
                        es: '<strong>Español</strong>: Entre los helvecios, Orgetórix fue, de lejos, el más noble y el más rico.',
                        en: '<strong>English</strong>: Among the Helvetii, by far the noblest and wealthiest was Orgetorix.',
                        zh: '<strong>中文（繁體）</strong>: 在赫爾維蒂人中，奧格托里克斯是目前為止最高貴和最富有的人。',
                        ko: '<strong>한국어</strong>: 헬베티족 가운데서 오르게토릭스는 단연 가장 고귀하고 가장 부유한 자였다。'
                    },
                    analysis_syntactica: `<p><strong>Propositio Principalis:</strong> Apud Heluetios longe nobilissimus fuit et ditissimus Orgetorix.</p><ul><li><strong>Subiectum:</strong> Orgetorix.</li><li><strong>Praedicātum nōmināle:</strong> fuit nobilissimus et ditissimus (<em>fuit</em> = copula; <em>nobilissimus et ditissimus</em> = nōmen praedicātīvum duplex).</li><li><strong>Complēmentum circumstantiāle loci:</strong> Apud Heluetios.</li><li><strong>Adverbium:</strong> longe.</li></ul>`,
                    verba: [
                        { id_verbi: 'v1_c2_1', terminus: 'Apud', analysis_morphologicus: 'Praepositiō (+ accūsātīvum)', significationes: { es: 'Entre', en: 'Among', zh: '在...之中', ko: '~중에서' } },
                        { id_verbi: 'v1_c2_2', terminus: 'Heluetios', analysis_morphologicus: 'Nōmen, masculīnum, plūrālis, accūsātīvus', significationes: { es: 'los helvecios', en: 'the Helvetii', zh: '赫爾維蒂人', ko: '헬베티족' } },
                        { id_verbi: 'v1_c2_3', terminus: 'longe', analysis_morphologicus: 'Adverbium', significationes: { es: 'de lejos', en: 'by far', zh: '遠遠地', ko: '훨씬' } },
                        { id_verbi: 'v1_c2_4', terminus: 'nobilissimus', analysis_morphologicus: 'Adiectīvum (superlātīvus), masculīnum, singulāris, nōminātīvus', significationes: { es: 'el más noble', en: 'the noblest', zh: '最高貴的', ko: '가장 고귀한' } },
                        { id_verbi: 'v1_c2_5', terminus: 'fuit', analysis_morphologicus: 'Verbum (sum, esse, fuī), perfectum, indicātīvus, āctīvus, tertia persōna, singulāris', significationes: { es: 'fue', en: 'was', zh: '是', ko: '~이었다' } },
                        { id_verbi: 'v1_c2_6', terminus: 'et', analysis_morphologicus: 'Coniūnctiō', significationes: { es: 'y', en: 'and', zh: '和', ko: '그리고' } },
                        { id_verbi: 'v1_c2_7', terminus: 'ditissimus', analysis_morphologicus: 'Adiectīvum (superlātīvus), masculīnum, singulāris, nōminātīvus', significationes: { es: 'el más rico', en: 'the wealthiest', zh: '最富有的', ko: '가장 부유한' } },
                        { id_verbi: 'v1_c2_8', terminus: 'Orgetorix', analysis_morphologicus: 'Nōmen proprium, masculīnum, singulāris, nōminātīvus', significationes: { es: 'Orgetórix', en: 'Orgetorix', zh: '奧格托里克斯', ko: '오르게토릭스' } }
                    ]
                },
                {
                    id_orationis: 'o2_c2',
                    textus_latinus: "Is M. Messala, et M. Pisone consulibus regni cupiditate inductus coniurationem nobilitatis fecit et civitati persuasit ut de finibus suis cum omnibus copiis exirent: perfacile esse, cum virtute omnibus praestarent, totius Galliae imperio potiri.",
                    translationes: {
                        es: '<strong>Español</strong>: Él, siendo cónsules Marco Mesala y Marco Pisón, inducido por el deseo de un reino, hizo una conspiración de la nobleza y persuadió a la ciudadanía para que salieran de sus fronteras con todas sus tropas: decía que era muy fácil, puesto que superaban a todos en valor, apoderarse del dominio de toda la Galia.',
                        en: '<strong>English</strong>: He, when Marcus Messala and Marcus Piso were consuls, induced by the desire for kingship, formed a conspiracy of the nobility and persuaded the state to go forth from their territories with all their forces: he said that it was very easy, since they surpassed all in courage, to gain possession of the sovereignty of all Gaul.',
                        zh: '<strong>中文（繁體）</strong>: 他在馬爾庫斯·梅薩拉和馬爾庫斯·皮索擔任執政官時，出於對王權的貪欲，策動了一場貴族陰謀，並說服其邦民帶上全部軍隊離開他們的領土：他說，既然他們在勇氣上超越了所有人，要奪取整個高盧的統治權是輕而易舉的。',
                        ko: '<strong>한국어</strong>: 그는 마르쿠스 메살라와 마르쿠스 피소의 집정관 시절, 왕권에 대한 욕망에 이끌려 귀족들의 음모를 꾸몄고, 시민들에게 모든 병력을 이끌고 자신들의 영토를 떠나도록 설득했다. 그는 용맹함에 있어 모두를 능가하므로, 갈리아 전체의 지배권을 장악하는 것이 매우 쉬울 것이라고 말했다.'
                    },
                    analysis_syntactica: `<p><strong>Propositio Principalis:</strong> Is... coniurationem nobilitatis fecit et civitati persuasit.</p><ul><li><strong>Subiectum:</strong> Is.</li><li><strong>Praedicāta:</strong> fecit (coniurationem nobilitatis) et persuasit (civitati).</li><li><strong>Complēmentum circumstantiāle temporis (Ablātīvus Absolūtus):</strong> M. Messala, et M. Pisone consulibus.</li><li><strong>Complēmentum circumstantiāle causae/modi:</strong> regni cupiditate inductus.</li></ul><p class="mt-2"><strong>Claūsula subordināta complētīva (ad <em>persuasit</em>):</strong> ut de finibus suis cum omnibus copiis exirent.</p><p class="mt-2"><strong>Claūsula subordināta infinitīva (ad <em>perfacile esse</em>):</strong> perfacile esse... potiri.</p><ul><li><strong>Subiectum infinitīvī:</strong> (se, subaudītum).</li><li><strong>Praedicātum infinitīvum:</strong> potiri (imperio totius Galliae).</li></ul><p class="mt-2"><strong>Claūsula subordināta causālis (introducta per <em>cum</em>):</strong> cum virtute omnibus praestarent.</p>`,
                    verba: [
                        { id_verbi: 'v2_c2_1', terminus: 'Is', analysis_morphologicus: 'Pronomēn dēmōnstrātīvum, masculīnum, singulāris, nōminātīvus', significationes: { es: 'Él', en: 'He', zh: '他', ko: '그는' } },
                        { id_verbi: 'v2_c2_2', terminus: 'M.', analysis_morphologicus: 'Nōmen proprium (abbreviatio), masculīnum, singulāris, ablātīvus', significationes: { es: 'Marco', en: 'Marcus', zh: '馬爾庫斯', ko: '마르쿠스' } },
                        { id_verbi: 'v2_c2_3', terminus: 'Messala', analysis_morphologicus: 'Nōmen proprium, masculīnum, singulāris, ablātīvus', significationes: { es: 'Mesala', en: 'Messala', zh: '梅薩拉', ko: '메살라' } },
                        { id_verbi: 'v2_c2_4', terminus: 'et', analysis_morphologicus: 'Coniūnctiō', significationes: { es: 'y', en: 'and', zh: '和', ko: '그리고' } },
                        { id_verbi: 'v2_c2_5', terminus: 'M.', analysis_morphologicus: 'Nōmen proprium (abbreviatio), masculīnum, singulāris, ablātīvus', significationes: { es: 'Marco', en: 'Marcus', zh: '馬爾庫斯', ko: '마르쿠스' } },
                        { id_verbi: 'v2_c2_6', terminus: 'Pisone', analysis_morphologicus: 'Nōmen proprium, masculīnum, singulāris, ablātīvus', significationes: { es: 'Pisón', en: 'Piso', zh: '皮索', ko: '피소' } },
                        { id_verbi: 'v2_c2_7', terminus: 'consulibus', analysis_morphologicus: 'Nōmen, masculīnum, plūrālis, ablātīvus', significationes: { es: 'cónsules', en: 'consuls', zh: '執政官', ko: '집정관' } },
                        { id_verbi: 'v2_c2_8', terminus: 'regni', analysis_morphologicus: 'Nōmen, neutrum, singulāris, genitīvus', significationes: { es: 'del reino', en: 'of kingship', zh: '王權的', ko: '왕권의' } },
                        { id_verbi: 'v2_c2_9', terminus: 'cupiditate', analysis_morphologicus: 'Nōmen, fēminīnum, singulāris, ablātīvus', significationes: { es: 'por el deseo', en: 'by desire', zh: '貪欲', ko: '욕망에' } },
                        { id_verbi: 'v2_c2_10', terminus: 'inductus', analysis_morphologicus: 'Participium perfectum passīvum (inducō), masculīnum, singulāris, nōminātīvus', significationes: { es: 'inducido', en: 'induced', zh: '被策動的', ko: '이끌려' } },
                        { id_verbi: 'v2_c2_11', terminus: 'coniurationem', analysis_morphologicus: 'Nōmen, fēminīnum, singulāris, accūsātīvus', significationes: { es: 'conspiración', en: 'conspiracy', zh: '陰謀', ko: '음모를' } },
                        { id_verbi: 'v2_c2_12', terminus: 'nobilitatis', analysis_morphologicus: 'Nōmen, fēminīnum, singulāris, genitīvus', significationes: { es: 'de la nobleza', en: 'of the nobility', zh: '貴族', ko: '귀족들의' } },
                        { id_verbi: 'v2_c2_13', terminus: 'fecit', analysis_morphologicus: 'Verbum (faciō), perfectum, indicātīvus, āctīvus, tertia persōna, singulāris', significationes: { es: 'hizo', en: 'made', zh: '策動了', ko: '꾸몄다' } },
                        { id_verbi: 'v2_c2_14', terminus: 'et', analysis_morphologicus: 'Coniūnctiō', significationes: { es: 'y', en: 'and', zh: '和', ko: '그리고' } },
                        { id_verbi: 'v2_c2_15', terminus: 'civitati', analysis_morphologicus: 'Nōmen, fēminīnum, singulāris, datīvus', significationes: { es: 'a la ciudadanía', en: 'to the state', zh: '其邦民', ko: '시민들에게' } },
                        { id_verbi: 'v2_c2_16', terminus: 'persuasit', analysis_morphologicus: 'Verbum (persuadeō), perfectum, indicātīvus, āctīvus, tertia persōna, singulāris', significationes: { es: 'persuadió', en: 'persuaded', zh: '說服', ko: '설득했다' } },
                        { id_verbi: 'v2_c2_17', terminus: 'ut', analysis_morphologicus: 'Coniūnctiō (+ subiūnctīvum)', significationes: { es: 'para que', en: 'that, in order that', zh: '以便', ko: '~하도록' } },
                        { id_verbi: 'v2_c2_18', terminus: 'de', analysis_morphologicus: 'Praepositiō (+ ablātīvum)', significationes: { es: 'de', en: 'from', zh: '從', ko: '~로부터' } },
                        { id_verbi: 'v2_c2_19', terminus: 'finibus', analysis_morphologicus: 'Nōmen, masculīnum, plūrālis, ablātīvus', significationes: { es: 'de las fronteras', en: 'from the territories', zh: '領土', ko: '영토를' } },
                        { id_verbi: 'v2_c2_20', terminus: 'suis', analysis_morphologicus: 'Adiectīvum possessīvum, masculīnum, plūrālis, ablātīvus', significationes: { es: 'sus propias', en: 'their own', zh: '他們自己的', ko: '자신들의' } },
                        { id_verbi: 'v2_c2_21', terminus: 'cum', analysis_morphologicus: 'Praepositiō (+ ablātīvum)', significationes: { es: 'con', en: 'with', zh: '帶上', ko: '~와 함께' } },
                        { id_verbi: 'v2_c2_22', terminus: 'omnibus', analysis_morphologicus: 'Adiectīvum, fēminīnum, plūrālis, ablātīvus', significationes: { es: 'todas', en: 'all', zh: '全部', ko: '모든' } },
                        { id_verbi: 'v2_c2_23', terminus: 'copiis', analysis_morphologicus: 'Nōmen, fēminīnum, plūrālis, ablātīvus', significationes: { es: 'tropas', en: 'forces', zh: '軍隊', ko: '병력을' } },
                        { id_verbi: 'v2_c2_24', terminus: 'exirent', analysis_morphologicus: 'Verbum (exeō), imperfectum, subiūnctīvus, āctīvus, tertia persōna, plūrālis', significationes: { es: 'salieran', en: 'they should go forth', zh: '離開', ko: '떠나도록' } },
                        { id_verbi: 'v2_c2_25', terminus: 'perfacile', analysis_morphologicus: 'Adiectīvum, neutrum, singulāris, nōminātīvus', significationes: { es: 'muy fácil', en: 'very easy', zh: '輕而易舉', ko: '매우 쉬운' } },
                        { id_verbi: 'v2_c2_26', terminus: 'esse', analysis_morphologicus: 'Verbum (sum, esse, fuī), praesēns, īnfīnītīvus', significationes: { es: 'ser', en: 'to be', zh: '是', ko: '이다' } },
                        { id_verbi: 'v2_c2_27', terminus: 'cum', analysis_morphologicus: 'Coniūnctiō causālis', significationes: { es: 'puesto que', en: 'since', zh: '既然', ko: '~이므로' } },
                        { id_verbi: 'v2_c2_28', terminus: 'virtute', analysis_morphologicus: 'Nōmen, fēminīnum, singulāris, ablātīvus', significationes: { es: 'en valor', en: 'in courage', zh: '在勇氣上', ko: '용맹함에 있어' } },
                        { id_verbi: 'v2_c2_29', terminus: 'omnibus', analysis_morphologicus: 'Pronomēn/Adiectīvum, masculīnum/fēminīnum/neutrum, plūrālis, datīvus', significationes: { es: 'a todos', en: 'to all', zh: '所有人', ko: '모두에게' } },
                        { id_verbi: 'v2_c2_30', terminus: 'praestarent', analysis_morphologicus: 'Verbum (praestō), imperfectum, subiūnctīvus, āctīvus, tertia persōna, plūrālis', significationes: { es: 'superaban', en: 'they surpassed', zh: '超越', ko: '능가하다' } },
                        { id_verbi: 'v2_c2_31', terminus: 'totius', analysis_morphologicus: 'Adiectīvum, fēminīnum, singulāris, genitīvus', significationes: { es: 'de toda', en: 'of all', zh: '整個', ko: '전체의' } },
                        { id_verbi: 'v2_c2_32', terminus: 'Galliae', analysis_morphologicus: 'Nōmen, fēminīnum, singulāris, genitīvus', significationes: { es: 'de la Galia', en: 'of Gaul', zh: '高盧', ko: '갈리아의' } },
                        { id_verbi: 'v2_c2_33', terminus: 'imperio', analysis_morphologicus: 'Nōmen, neutrum, singulāris, datīvus', significationes: { es: 'del dominio', en: 'of the sovereignty', zh: '統治權', ko: '지배권을' } },
                        { id_verbi: 'v2_c2_34', terminus: 'potiri', analysis_morphologicus: 'Verbum (potior), praesēns, īnfīnītīvus, dēpōnēns', significationes: { es: 'apoderarse', en: 'to gain possession of', zh: '奪取', ko: '장악하다' } }
                    ]
                }
                // Aquí se añadirían más oraciones del Capítulo II si se dispusiera de los datos completos.
                // Por ejemplo:
                // {
                //     id_orationis: 'o3_c2',
                //     textus_latinus: "His rebus adducti et auctoritate Orgetorigis permoti, constituerunt ea quae ad proficiscendum pertinerent comparare, iumentorum et carrorum quam maximum numerum coemere, sementes quam maximas facere, ut in itinere copia frumenti suppeteret, cum proximis civitatibus pacem et amicitiam confirmare.",
                //     translationes: {
                //         es: '<strong>Español</strong>: Inducidos por estas cosas y conmovidos por la autoridad de Orgetórix, decidieron preparar lo necesario para la partida, comprar el mayor número posible de bestias de carga y carros, hacer las siembras más grandes posibles para que en el camino hubiera suficiente abundancia de trigo, y confirmar la paz y la amistad con las ciudades más cercanas.',
                //         en: '<strong>English</strong>: Influenced by these considerations and stirred by the authority of Orgetorix, they resolved to procure everything requisite for their expedition, to buy up as great a number as possible of beasts of burden and wagons, to make their sowings as large as possible, so that a stock of grain might be at hand on their march, and to confirm peace and friendship with the nearest states.',
                //         zh: '<strong>中文（繁體）</strong>: 受到這些因素的影響並被奧格托里克斯的權威所激勵，他們決定準備好所有與出發相關的物資，購買盡可能多的役畜和車輛，進行盡可能多的播種，以便在旅途中能有充足的糧食供應，並與鄰近的城邦確認和平與友誼。',
                //         ko: '<strong>한국어</strong>: 이러한 상황에 이끌리고 오르게토릭스의 권위에 고무되어, 그들은 출발에 필요한 모든 것을 준비하기로 결정했다. 즉, 가능한 한 많은 짐승과 수레를 구입하고, 여행 중에 충분한 곡물이 공급될 수 있도록 가능한 한 많이 파종하며, 가장 가까운 국가들과 평화와 우정을 확고히 하기로 했다.'
                //     },
                //     analysis_syntactica: `<p><strong>Propositio Principalis:</strong> constituerunt ea... comparare, iumentorum... coemere, sementes... facere, cum... confirmare.</p><ul><li><strong>Subiectum:</strong> (Heluetii, subaudītum).</li><li><strong>Praedicātum:</strong> constituerunt.</li><li><strong>Complēmenta circumstantiālia causae:</strong> His rebus adducti et auctoritate Orgetorigis permoti.</li></ul><p class="mt-2"><strong>Claūsulae infinitīvae (ad <em>constituerunt</em>):</strong></p><ul><li>ea... comparare</li><li>iumentorum... coemere</li><li>sementes... facere</li><li>pacem et amicitiam confirmare</li></ul><p class="mt-2"><strong>Claūsula subordināta relātīva (ad <em>ea</em>):</strong> quae ad proficiscendum pertinerent.</p><p class="mt-2"><strong>Claūsula subordināta finālis (ad <em>sementes... facere</em>):</strong> ut in itinere copia frumenti suppeteret.</p>`,
                //     verba: [
                //         // ... palabras y análisis para la oración 3
                //     ]
                // }
            ]
        };
        
        const paragrafusContentus = document.getElementById('paragrafus-contentus');
        const marginaliaContentus = document.getElementById('marginalia-contentus');
        const visusParagrafi = document.getElementById('visus-paragrafi');
        const visusOrationis = document.getElementById('visus-orationis');
        const buttonRedire = document.getElementById('button-redire');
        const oratioLatinaTextus = document.getElementById('oratio-latina-textus');
        const translatioES = document.getElementById('translatio-es');
        const translatioEN = document.getElementById('translatio-en');
        const translatioZH = document.getElementById('translatio-zh');
        const translatioKO = document.getElementById('translatio-ko');
        const analysisSyntacticaContentus = document.getElementById('analysis-syntactica-contentus');
        const linguaSelector = document.getElementById('lingua-selector');
        const tooltip = document.getElementById('translatio-tooltip');
        let linguaPraefecta = 'es';

        function monstraContentusDefectu() {
            marginaliaContentus.innerHTML = `
                <h3 class="text-xl font-semibold text-gray-800 mb-4">Analysis Morphologica</h3>
                <div class="space-y-2 text-gray-600">
                    <p><strong>ES:</strong> Selecciona una palabra para ver su análisis.</p>
                    <p><strong>EN:</strong> Select a word to see its analysis.</p>
                    <p><strong>中文:</strong> 選擇一個詞以查看其分析。</p>
                    <p><strong>KO:</strong> 단어를 선택하여 분석을 확인하세요。</p>
                </div>
            `;
        }

        function reddeParagrafum() {
            paragrafusContentus.innerHTML = '';
            paragrafus.orationes.forEach(oratio => {
                const oratioSpan = document.createElement('span');
                oratioSpan.className = 'oratio';
                oratioSpan.dataset.oratioId = oratio.id_orationis;

                let textusTemporarius = oratio.textus_latinus;
                // Ordenar las palabras por longitud descendente para evitar reemplazos parciales de palabras más largas
                const verbaSorted = [...oratio.verba].sort((a,b) => b.terminus.length - a.terminus.length);

                verbaSorted.forEach(verbum => {
                    // Usar una expresión regular para reemplazar solo la palabra completa y evitar conflictos con HTML ya insertado
                    // (?![^<]*?>) asegura que no se reemplace dentro de una etiqueta HTML
                    const regex = new RegExp(`\\b${verbum.terminus.replace(/[-\/\\^$*+?.()|[\]{}]/g, '\\$&')}\\b(?![^<]*?>)`, 'g');
                    const replacement = `<span class="verbum" data-verbum-id="${verbum.id_verbi}">${verbum.terminus}</span>`;
                    textusTemporarius = textusTemporarius.replace(regex, replacement);
                });

                oratioSpan.innerHTML = textusTemporarius + ' ';
                oratioSpan.addEventListener('mouseenter', monstraTooltip);
                oratioSpan.addEventListener('mouseleave', occultaTooltip);
                oratioSpan.addEventListener('mousemove', moveTooltip);
                paragrafusContentus.appendChild(oratioSpan);
            });
        }

        function monstraAnalyseonVerbi(verbumId) {
            let verbumData = null;
            for (const oratio of paragrafus.orationes) {
                verbumData = oratio.verba.find(v => v.id_verbi === verbumId);
                if (verbumData) break;
            }
            if (!verbumData) return;

            marginaliaContentus.innerHTML = `
                <h3 class="text-2xl textum-classicum text-gray-800 mb-4">${verbumData.terminus}</h3>
                <div class="space-y-4">
                    <div>
                        <h4 class="font-bold text-sm uppercase text-gray-500 tracking-wider">Analysis Morphologica</h4>
                        <p class="text-gray-700 mt-1">${verbumData.analysis_morphologicus}</p>
                    </div>
                    <div>
                        <h4 class="font-bold text-sm uppercase text-gray-500 tracking-wider">Significationes</h4>
                        <ul class="list-disc list-inside mt-2 space-y-1 text-gray-700">
                            <li><strong>ES:</strong> ${verbumData.significationes.es}</li>
                            <li><strong>EN:</strong> ${verbumData.significationes.en}</li>
                            <li><strong>中文:</strong> ${verbumData.significationes.zh}</li>
                            <li><strong>KO:</strong> ${verbumData.significationes.ko}</li>
                        </ul>
                    </div>
                </div>
            `;
        }
        
        function monstraAnalyseonOrationis(oratioId) {
            const oratioData = paragrafus.orationes.find(o => o.id_orationis === oratioId);
            if (!oratioData) return;

            oratioLatinaTextus.textContent = oratioData.textus_latinus;
            translatioES.innerHTML = oratioData.translationes.es;
            translatioEN.innerHTML = oratioData.translationes.en;
            translatioZH.innerHTML = oratioData.translationes.zh;
            translatioKO.innerHTML = oratioData.translationes.ko;
            analysisSyntacticaContentus.innerHTML = oratioData.analysis_syntactica;
            
            document.querySelector('.main-layout').classList.add('occultus');
            visusOrationis.classList.remove('occultus');
            window.scrollTo(0, 0);
        }

        function initialisareLinguam() {
            const linguaServata = localStorage.getItem('linguaPraefecta') || 'es';
            linguaPraefecta = linguaServata;
            const radioInput = document.querySelector(`#lingua-selector input[value="${linguaServata}"]`);
            if (radioInput) {
                radioInput.checked = true;
            }
        }

        function mutareLinguam(event) {
            linguaPraefecta = event.target.value;
            localStorage.setItem('linguaPraefecta', linguaPraefecta);
        }
        
        function monstraTooltip(event) {
            const oratioId = event.currentTarget.dataset.oratioId;
            const oratioData = paragrafus.orationes.find(o => o.id_orationis === oratioId);
            if (oratioData && oratioData.translationes[linguaPraefecta]) {
                const translatioTextus = oratioData.translationes[linguaPraefecta].replace(/<strong>.*?<\/strong>:\s*/, '');
                tooltip.textContent = translatioTextus;
                tooltip.style.display = 'block';
            }
        }

        function occultaTooltip() {
            tooltip.style.display = 'none';
        }

        function moveTooltip(event) {
            tooltip.style.left = `${event.pageX + 15}px`;
            tooltip.style.top = `${event.pageY + 15}px`;
        }

        paragrafusContentus.addEventListener('click', (e) => {
            const verbumTarget = e.target.closest('.verbum');
            const oratioTarget = e.target.closest('.oratio');

            if (verbumTarget) {
                e.stopPropagation();
                document.querySelectorAll('.activus').forEach(el => el.classList.remove('activus'));
                monstraAnalyseonVerbi(verbumTarget.dataset.verbumId);
                verbumTarget.classList.add('activus');
            } else if (oratioTarget) {
                monstraAnalyseonOrationis(oratioTarget.dataset.oratioId);
            }
        });

        buttonRedire.addEventListener('click', () => {
            visusOrationis.classList.add('occultus');
            document.querySelector('.main-layout').classList.remove('occultus');
        });

        linguaSelector.addEventListener('change', mutareLinguam);

        initialisareLinguam();
        reddeParagrafum();
        monstraContentusDefectu(); // Muestra el contenido por defecto al cargar
    });
    </script>
</body>
</html>

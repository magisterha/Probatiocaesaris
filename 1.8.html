<!DOCTYPE html>
<html lang="la">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>De Bello Gallico - Analysis Textualis</title>
    
    <style type="text/css">
      /* --- Tailwind CSS Pre-compilado (Preflight & Utilitarios Usados) --- */
      *,::before,::after{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}::before,::after{--tw-content:''}html{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;tab-size:4;font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;font-weight:inherit;line-height:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,[type='button'],[type='reset'],[type='submit']{-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type='search']{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dl,dd,h1,h2,h3,h4,h5,h6,hr,figure,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}ol,ul,menu{list-style:none;margin:0;padding:0}textarea{resize:vertical}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}button, [role="button"]{cursor:pointer}:disabled{cursor:default}img,svg,video,canvas,audio,iframe,embed,object{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]{display:none}
      .container{width:100%}@media (min-width:640px){.container{max-width:640px}}@media (min-width:768px){.container{max-width:768px}}@media (min-width:1024px){.container{max-width:1024px}}@media (min-width:1280px){.container{max-width:1280px}}@media (min-width:1536px){.container{max-width:1536px}}
      .fixed{position:fixed}.absolute{position:absolute}.sticky{position:sticky}.inset-0{top:0;right:0;bottom:0;left:0}.top-0{top:0}.z-30{z-index:30}.z-50{z-index:50}
      .mx-auto{margin-left:auto;margin-right:auto}.mb-8{margin-bottom:2rem}.mb-10{margin-bottom:2.5rem}.mt-2{margin-top:0.5rem}.mr-2{margin-right:0.5rem}.mt-6{margin-top:1.5rem}
      .block{display:block}.inline-flex{display:inline-flex}.flex{display:flex}.h-4{height:1rem}.w-4{width:1rem}.h-5{height:1.25rem}.w-5{width:1.25rem}.h-screen{height:100vh}.w-80{width:20rem}
      .transform{transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}
      .gap-x-1{column-gap:0.25rem}.gap-x-4{column-gap:1rem}.gap-x-6{column-gap:1.5rem}.gap-8{gap:2rem}.gap-12{gap:3rem}
      .overflow-y-auto{overflow-y:auto}.rounded-lg{border-radius:0.5rem}.rounded-md{border-radius:0.375rem}
      .border-b-2{border-bottom-width:2px}.border-stone-300{--tw-border-opacity:1;border-color:rgb(214 211 209 / var(--tw-border-opacity))}
      .bg-stone-50{--tw-bg-opacity:1;background-color:rgb(250 250 249 / var(--tw-bg-opacity))}
      .bg-stone-100{--tw-bg-opacity:1;background-color:rgb(245 245 244 / var(--tw-bg-opacity))}
      .bg-stone-200{--tw-bg-opacity:1;background-color:rgb(231 229 228 / var(--tw-bg-opacity))}
      .bg-white{--tw-bg-opacity:1;background-color:rgb(255 255 255 / var(--tw-bg-opacity))}
      .bg-gray-700{--tw-bg-opacity:1;background-color:rgb(55 65 81 / var(--tw-bg-opacity))}
      .hover\:bg-gray-800:hover{--tw-bg-opacity:1;background-color:rgb(31 41 55 / var(--tw-bg-opacity))}
      .p-4{padding:1rem}.p-6{padding:1.5rem}.p-8{padding:2rem}.px-6{padding-left:1.5rem;padding-right:1.5rem}.py-2{padding-top:0.5rem;padding-bottom:0.5rem}.pb-4{padding-bottom:1rem}.pb-5{padding-bottom:1.25rem}
      .text-center{text-align:center}.text-justify{text-align:justify}
      .text-2xl{font-size:1.5rem;line-height:2rem}.text-3xl{font-size:1.875rem;line-height:2.25rem}.text-5xl{font-size:3rem;line-height:1}
      .text-sm{font-size:0.875rem;line-height:1.25rem}.text-xl{font-size:1.25rem;line-height:1.75rem}
      .font-bold{font-weight:700}.font-semibold{font-weight:600}.leading-relaxed{line-height:1.625}
      .text-gray-500{--tw-text-opacity:1;color:rgb(107 114 128 / var(--tw-text-opacity))}
      .text-gray-600{--tw-text-opacity:1;color:rgb(75 85 99 / var(--tw-text-opacity))}
      .text-gray-700{--tw-text-opacity:1;color:rgb(55 65 81 / var(--tw-text-opacity))}
      .text-gray-800{--tw-text-opacity:1;color:rgb(31 41 55 / var(--tw-text-opacity))}
      .text-white{--tw-text-opacity:1;color:rgb(255 255 255 / var(--tw-text-opacity))}
      .shadow-lg{--tw-shadow:0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color), 0 4px 6px -4px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}
      .transition{transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter;-webkit-backdrop-filter:backdrop-filter;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}
      .ease-in-out{transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1)}
      .grid{display:grid}.grid-cols-1{grid-template-columns:repeat(1,minmax(0,1fr))}.items-center{align-items:center}.justify-center{justify-content:center}.justify-between{justify-content:space-between}
      .space-y-2>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-top:calc(0.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(0.5rem * var(--tw-space-y-reverse))}
      .space-y-3>:not([hidden])~:not([hidden]){--tw-space-y-reverse:0;margin-top:calc(0.75rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(0.75rem * var(--tw-space-y-reverse))}
      @media (min-width:1024px){.lg\:p-12{padding:3rem}.lg\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}}
      
      /* --- Estilos Personalizados --- */
      body{background-color:#f3f0e9;font-family:'Helvetica Neue',Arial,sans-serif;color:#4a4a4a}
      .textum-classicum{font-family:'Georgia','Times New Roman',serif}
      .verbum,.oratio{cursor:pointer;transition:background-color .2s ease-in-out}
      .oratio:hover{background-color:#d8cbad}.verbum:hover{background-color:#eaddc5}
      .activus{background-color:#cbbca7!important;font-weight:700}
      
      /* --- NUEVO LAYOUT ESTÁTICO --- */
      .main-layout {
          display: grid;
          grid-template-columns: 20rem 1fr; /* 20rem para el panel, el resto para el contenido */
          gap: 2rem;
          padding: 2rem;
      }

      #marginalia-sinistra {
          position: sticky; /* Se mantiene fijo al hacer scroll */
          top: 2rem;
          height: calc(100vh - 4rem); /* Altura de la ventana menos el padding */
      }

      #visus-orationis{transition:opacity .3s ease-in-out,transform .3s ease-in-out}
      .occultus{display:none} /* Simplificado para la vista de oración */
      #translatio-tooltip{position:absolute;display:none;padding:.5rem 1rem;background-color:#2d3748;color:#fff;border-radius:.375rem;font-size:.875rem;line-height:1.25rem;max-width:320px;z-index:50;pointer-events:none}
    </style>
</head>
<body class="bg-stone-100">

    <div class="main-layout">
        <!-- Panel de Análisis (siempre visible) -->
        <aside id="marginalia-sinistra" class="bg-white shadow-xl p-6 rounded-lg overflow-y-auto">
            <div id="marginalia-contentus">
                <!-- Contenido por defecto o de análisis se insertará aquí -->
            </div>
        </aside>

        <!-- Contenido Principal -->
        <div id="visus-paragrafi">
            <main>
                <header class="text-center mb-10 border-b-2 border-stone-300 pb-5">
                    <h1 class="text-5xl textum-classicum text-gray-800">De Bello Gallico</h1>
                    <h2 class="text-2xl text-gray-600 mt-2">Liber I, Caput VIII</h2>
                </header>
                
                <section id="lingua-selector" class="mb-8 p-4 bg-stone-200 rounded-lg flex items-center justify-center gap-x-6">
                    <h3 class="font-bold text-gray-700">Lingua Translationis:</h3>
                    <div class="flex items-center gap-x-4">
                        <label class="flex items-center gap-x-1 cursor-pointer"><input type="radio" name="lingua" value="es" class="h-4 w-4"> Español</label>
                        <label class="flex items-center gap-x-1 cursor-pointer"><input type="radio" name="lingua" value="en" class="h-4 w-4"> English</label>
                        <label class="flex items-center gap-x-1 cursor-pointer"><input type="radio" name="lingua" value="zh" class="h-4 w-4"> 中文</label>
                        <label class="flex items-center gap-x-1 cursor-pointer"><input type="radio" name="lingua" value="ko" class="h-4 w-4"> 한국어</label>
                    </div>
                </section>

                <div id="paragrafus-contentus" class="textum-classicum text-xl leading-relaxed text-justify bg-white p-8 lg:p-12 rounded-lg shadow-lg">
                    <!-- El parágrafo interactivo se generará aquí -->
                </div>
                   <footer class="text-center mt-6 text-sm text-gray-500">
                    <p><i>Preme verbum singulum pro analysi. Preme sententiam totam pro analysi completa. Suspende murem super sententiam pro translatione rapida.</i></p>
                </footer>
            </main>
        </div>
    </div>

    <!-- Vista de Análisis de Oración (oculta por defecto) -->
    <div id="visus-orationis" class="occultus fixed inset-0 bg-stone-50 z-30 p-8 lg:p-16 overflow-y-auto">
        <header class="flex justify-between items-center border-b-2 border-stone-300 pb-4 mb-8">
            <h2 class="text-3xl textum-classicum text-gray-800">Analysis Orationis</h2>
            <button id="button-redire" class="inline-flex items-center px-6 py-2 bg-gray-700 text-white font-bold rounded-md hover:bg-gray-800 transition">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd" />
                </svg>
                Redire ad Textum
            </button>
        </header>
        
        <div id="oratio-analysis-contentus" class="grid grid-cols-1 lg:grid-cols-2 gap-12">
            <div>
                <section class="mb-8">
                    <h3 class="text-xl font-bold text-gray-700 mb-2">Oratio Latina</h3>
                    <p id="oratio-latina-textus" class="textum-classicum text-2xl leading-relaxed bg-white p-4 rounded-md shadow"></p>
                </section>
                <section>
                    <h3 class="text-xl font-bold text-gray-700 mb-3">Translationes</h3>
                    <div class="space-y-3">
                        <div id="translatio-es"></div>
                        <div id="translatio-en"></div>
                        <div id="translatio-zh"></div>
                        <div id="translatio-ko"></div>
                    </div>
                </section>
            </div>
            <div>
                <section>
                    <h3 class="text-xl font-bold text-gray-700 mb-3">Analysis Syntactica</h3>
                    <div id="analysis-syntactica-contentus" class="bg-white p-4 rounded-md shadow space-y-3 text-gray-700"></div>
                </section>
            </div>
        </div>
    </div>
    
    <div id="translatio-tooltip"></div>

    <script>
    document.addEventListener('DOMContentLoaded', () => {

        // --- Datos para el Capítulo VIII de "De Bello Gallico" ---
        const paragrafus = {
            id: 8,
            orationes: [
                {
                    id_orationis: 'o1_c8',
                    textus_latinus: "Interea ea legione quam secum habebat militibusque, qui ex provincia convenerant, a lacu Lemanno, qui in flumen Rhodanum influit, ad montem Iuram, qui fines Sequanorum ab Helvetiis dividit, milia passuum XVIIII murum in altitudinem pedum sedecim fossamque perducit.",
                    translationes: {
                        es: '<strong>Español</strong>: Entretanto, con aquella legión que tenía consigo y con los soldados que se habían reunido de la provincia, construye un muro de diecinueve millas de largo y dieciséis pies de alto y un foso, desde el lago Lemán, que desemboca en el río Ródano, hasta el monte Jura, que separa las fronteras de los sécuanos de las de los helvecios.',
                        en: '<strong>English</strong>: Meanwhile, with that legion which he had with him and with the soldiers who had assembled from the Province, he constructs a wall nineteen miles long and sixteen feet high, and a ditch, from Lake Geneva, which flows into the Rhone river, to Mount Jura, which separates the territory of the Sequani from the Helvetii.',
                        zh: '<strong>中文（繁體）</strong>: 在此期間，他利用隨身攜帶的那個軍團和從行省召集來的士兵，從流入羅納河的雷夢湖，到將塞夸尼人領地與赫爾維蒂人分開的汝拉山，建造了一道長十九羅馬里、高十六羅馬尺的城牆和一條壕溝。',
                        ko: '<strong>한국어</strong>: 그러는 동안, 그는 자신과 함께 있던 그 군단과 속주에서 모인 병사들을 동원하여, 론 강으로 흘러 들어가는 레만 호수에서부터 세콰니족의 영토를 헬베티족과 나누는 쥐라 산맥까지, 길이 19마일, 높이 16피트의 성벽과 해자를 건설한다.'
                    },
                    analysis_syntactica: `<p><strong>Propositio Principalis:</strong> Interea... perducit.</p><ul><li><strong>Subiectum (subaudītum):</strong> Caesar.</li><li><strong>Praedicātum:</strong> perducit.</li><li><strong>Obiectum dīrēctum:</strong> murum... fossamque.</li><li><strong>Complēmentum instrumentī (Ablātīvus):</strong> ea legione militibusque.</li><li><strong>Complēmentum loci:</strong> a lacu Lemanno... ad montem Iuram.</li><li><strong>Claūsulae relātīvae:</strong> quam secum habebat, qui ex provincia convenerant, qui in flumen Rhodanum influit, qui fines... dividit.</li></ul>`,
                    verba: [
                        { id_verbi: 'v1_c8_1', terminus: 'Interea', analysis_morphologicus: 'Adverbium', significationes: { es: 'Entretanto', en: 'Meanwhile', zh: '在此期間', ko: '그 동안에' } },
                        { id_verbi: 'v1_c8_2', terminus: 'ea legione', analysis_morphologicus: 'Ablātīvus instrumentī', significationes: { es: 'con aquella legión', en: 'with that legion', zh: '用那個軍團', ko: '그 군단으로' } },
                        { id_verbi: 'v1_c8_3', terminus: 'quam secum habebat', analysis_morphologicus: 'Claūsula relātīva', significationes: { es: 'que tenía consigo', en: 'which he had with him', zh: '他隨身攜帶的', ko: '자신과 함께 있던' } },
                        { id_verbi: 'v1_c8_4', terminus: 'militibusque', analysis_morphologicus: 'Nōmen, masculīnum, plūrālis, ablātīvus', significationes: { es: 'y con los soldados', en: 'and with the soldiers', zh: '和士兵們', ko: '그리고 병사들로' } },
                        { id_verbi: 'v1_c8_5', terminus: 'qui ex provincia convenerant', analysis_morphologicus: 'Claūsula relātīva', significationes: { es: 'que se habían reunido de la provincia', en: 'who had assembled from the Province', zh: '他們曾聚集', ko: '그들은 모였었다' } },
                        { id_verbi: 'v1_c8_6', terminus: 'a lacu Lemanno', analysis_morphologicus: 'Syntagma praepositiōnāle (ablātīvus)', significationes: { es: 'desde el lago Lemán', en: 'from Lake Geneva', zh: '從雷夢湖', ko: '레만 호수에서부터' } },
                        { id_verbi: 'v1_c8_7', terminus: 'qui in flumen Rhodanum influit', analysis_morphologicus: 'Claūsula relātīva', significationes: { es: 'que desemboca en el río Ródano', en: 'which flows into the Rhone river', zh: '它流入', ko: '그것은...흘러든다' } },
                        { id_verbi: 'v1_c8_8', terminus: 'ad montem Iuram', analysis_morphologicus: 'Syntagma praepositiōnāle (accūsātīvus)', significationes: { es: 'hasta el monte Jura', en: 'to Mount Jura', zh: '到汝拉山', ko: '쥐라 산맥까지' } },
                        { id_verbi: 'v1_c8_9', terminus: 'qui fines Sequanorum ab Helvetiis dividit', analysis_morphologicus: 'Claūsula relātīva', significationes: { es: 'que separa las fronteras de los sécuanos de las de los helvecios', en: 'which separates the territory of the Sequani from the Helvetii', zh: '將塞夸尼人領地與赫爾維蒂人分開的', ko: '세콰니족의 영토를 헬베티족과 나누는' } },
                        { id_verbi: 'v1_c8_10', terminus: 'milia passuum XVIIII', analysis_morphologicus: 'Accūsātīvus extensionis', significationes: { es: 'diecinueve millas', en: '19 miles', zh: '十九羅馬里', ko: '19마일' } },
                        { id_verbi: 'v1_c8_11', terminus: 'murum', analysis_morphologicus: 'Nōmen, masculīnum, singulāris, accūsātīvus', significationes: { es: 'un muro', en: 'a wall', zh: '城牆', ko: '성벽' } },
                        { id_verbi: 'v1_c8_12', terminus: 'in altitudinem pedum sedecim', analysis_morphologicus: 'Locutiō adiectīva (adverbialis)', significationes: { es: 'de dieciséis pies de alto', en: 'in height of sixteen feet', zh: '高十六羅馬尺', ko: '높이 16피트의' } },
                        { id_verbi: 'v1_c8_13', terminus: 'fossamque', analysis_morphologicus: 'Nōmen, fēminīnum, singulāris, accūsātīvus', significationes: { es: 'y un foso', en: 'and a ditch', zh: '和一條壕溝', ko: '그리고 해자를' } },
                        { id_verbi: 'v1_c8_14', terminus: 'perducit', analysis_morphologicus: 'Verbum, praesēns, indicātīvus, āctīvus, tertia persōna, singulāris', significationes: { es: 'construye', en: 'he constructs', zh: '他建造', ko: '그는 건설한다' } }
                    ]
                },
                {
                    id_orationis: 'o2_c8',
                    textus_latinus: "Eo opere perfecto praesidia disponit, castella communit, quo facilius, si se invito transire conentur, prohibere possit.",
                    translationes: {
                        es: '<strong>Español</strong>: Terminada esta obra, dispone guarniciones y fortifica fortines para poder impedirles el paso más fácilmente si intentaran cruzar contra su voluntad.',
                        en: '<strong>English</strong>: With that work completed, he stations garrisons and fortifies forts, so that he might more easily be able to stop them if they should try to cross against his will.',
                        zh: '<strong>中文（繁體）</strong>: 工程完成後，他部署了駐軍，加固了堡壘，以便萬一他們違背他的意願試圖渡河時，他能更容易地阻止他們。',
                        ko: '<strong>한국어</strong>: 이 공사가 끝나자, 그는 수비대를 배치하고 요새를 강화하여, 만약 그들이 그의 뜻에 반하여 건너려 시도할 경우 더 쉽게 막을 수 있도록 하였다.'
                    },
                    analysis_syntactica: `<p><strong>Propositio Principalis (coordināta):</strong> praesidia disponit, castella communit.</p><ul><li><strong>Subiectum (subaudītum):</strong> Caesar.</li><li><strong>Ablātīvus absolūtus:</strong> Eo opere perfecto.</li><li><strong>Claūsula fīnālis (introducta per quo):</strong> quo facilius... prohibere possit.</li><li><strong>Claūsula condicionālis (in oratione obliqua intra fīnālem):</strong> si se invito transire conentur.</li></ul>`,
                    verba: [
                        { id_verbi: 'v2_c8_1', terminus: 'Eo opere perfecto', analysis_morphologicus: 'Ablātīvus absolūtus', significationes: { es: 'Terminada esta obra', en: 'With that work completed', zh: '工程完成後', ko: '그 공사가 끝난 후에' } },
                        { id_verbi: 'v2_c8_2', terminus: 'praesidia disponit', analysis_morphologicus: 'Obiectum + Verbum', significationes: { es: 'dispone guarniciones', en: 'he stations garrisons', zh: '他部署駐軍', ko: '수비대를 배치한다' } },
                        { id_verbi: 'v2_c8_3', terminus: 'castella communit', analysis_morphologicus: 'Obiectum + Verbum', significationes: { es: 'fortifica fortines', en: 'he fortifies forts', zh: '他加固堡壘', ko: '요새를 강화한다' } },
                        { id_verbi: 'v2_c8_4', terminus: 'quo facilius', analysis_morphologicus: 'Claūsula fīnālis', significationes: { es: 'para poder más fácilmente', en: 'so that he might more easily', zh: '以便更容易地', ko: '더 쉽게...할 수 있도록' } },
                        { id_verbi: 'v2_c8_5', terminus: 'si se invito transire conentur', analysis_morphologicus: 'Condiciō in oratione obliqua', significationes: { es: 'si intentaran cruzar contra su voluntad', en: 'if they should try to cross against his will', zh: '如果他們試圖', ko: '만약 그들이 시도한다면' } },
                        { id_verbi: 'v2_c8_6', terminus: 'prohibere possit', analysis_morphologicus: 'Verbum (prohibeō) + Verbum (possum)', significationes: { es: 'poder impedir', en: 'he might be able to stop', zh: '他能阻止', ko: '막을 수 있도록' } }
                    ]
                },
                {
                    id_orationis: 'o3_c8',
                    textus_latinus: "Ubi ea dies quam constituerat cum legatis venit et legati ad eum reverterunt, negat se more et exemplo populi Romani posse iter ulli per provinciam dare et, si vim facere conentur, prohibiturum ostendit.",
                    translationes: {
                        es: '<strong>Español</strong>: Cuando llegó el día que había fijado con los legados y estos volvieron a él, dice que, según la costumbre y el ejemplo del pueblo romano, no puede dar a nadie paso por la provincia y, si intentaran usar la violencia, manifiesta que lo impediría.',
                        en: '<strong>English</strong>: When that day which he had appointed with the ambassadors came and the ambassadors returned to him, he says that, according to the custom and precedent of the Roman people, he cannot give anyone a path through the Province and, if they should try to use force, he shows that he would stop them.',
                        zh: '<strong>中文（繁體）</strong>: 當他與使者約定的那一天到來，使者們回到他這裡時，他表示，根據羅馬人民的習俗和先例，他不能允許任何人通過行省，並表明如果他們試圖使用武力，他將會阻止。',
                        ko: '<strong>한국어</strong>: 그가 사절들과 정했던 그날이 오고 사절들이 그에게 돌아오자, 그는 로마 민족의 관습과 선례에 따라 어느 누구에게도 속주를 통과하는 길을 내어줄 수 없으며, 만약 그들이 무력을 사용하려 한다면 막을 것이라고 분명히 밝혔다.'
                    },
                    analysis_syntactica: `<p><strong>Claūsula temporālis (introducta per Ubi):</strong> Ubi ea dies... venit et legati... reverterunt.</p><ul><li><strong>Propositio Principalis (duplex):</strong> negat et ostendit.</li><li><strong>Subiectum (subaudītum):</strong> Caesar.</li><li><strong>Oratiōnēs īnfīnītīvae (obiectum verbī negat et ostendit):</strong></li><li>se... posse iter... dare.</li><li>(se) prohibiturum [esse].</li><li><strong>Claūsula condicionālis (in oratione obliqua):</strong> si vim facere conentur.</li></ul>`,
                    verba: [
                        { id_verbi: 'v3_c8_1', terminus: 'Ubi ea dies... venit', analysis_morphologicus: 'Claūsula temporālis', significationes: { es: 'Cuando llegó el día', en: 'When that day... came', zh: '當那天到來時', ko: '그 날이 왔을 때' } },
                        { id_verbi: 'v3_c8_2', terminus: 'quam constituerat cum legatis', analysis_morphologicus: 'Claūsula relātīva', significationes: { es: 'que había fijado con los legados', en: 'which he had appointed with the ambassadors', zh: '他與使者約定的', ko: '그가 사절들과 정했던' } },
                        { id_verbi: 'v3_c8_3', terminus: 'et legati ad eum reverterunt', analysis_morphologicus: 'Propositio coordinata', significationes: { es: 'y estos volvieron a él', en: 'and the ambassadors returned to him', zh: '使者們回到他這裡時', ko: '사절들이 그에게 돌아오자' } },
                        { id_verbi: 'v3_c8_4', terminus: 'negat', analysis_morphologicus: 'Verbum, praesēns, indicātīvus, āctīvus, tertia persōna, singulāris', significationes: { es: 'dice que no', en: 'he says... not', zh: '他否認/拒絕', ko: '그는 거절한다' } },
                        { id_verbi: 'v3_c8_5', terminus: 'se more et exemplo populi Romani posse iter ulli per provinciam dare', analysis_morphologicus: 'Oratio īnfīnītīva', significationes: { es: 'que él no puede dar a nadie paso por la provincia según la costumbre y el ejemplo del pueblo romano', en: 'that he cannot give anyone a path through the Province according to the custom and precedent of the Roman people', zh: '他不能給予', ko: '자신이 줄 수 없다고' } },
                        { id_verbi: 'v3_c8_6', terminus: 'si vim facere conentur', analysis_morphologicus: 'Condiciō in oratione obliqua', significationes: { es: 'si intentaran usar la violencia', en: 'if they should try to use force', zh: '如果他們試圖', ko: '만약 그들이 시도한다면' } },
                        { id_verbi: 'v3_c8_7', terminus: 'prohibiturum ostendit', analysis_morphologicus: 'Futūrus īnfīnītīvus āctīvus + Verbum', significationes: { es: 'manifiesta que lo impediría', en: 'he shows that he would stop them', zh: '他表明', ko: '그는 보여준다' } }
                    ]
                },
                {
                    id_orationis: 'o4_c8',
                    textus_latinus: "Helvetii ea spe deiecti navibus iunctis ratibusque compluribus factis, alii vadis Rhodani, qua minima altitudo fluminis erat, non numquam interdiu, saepius noctu si perrumpere possent conati, operis munitione et militum concursu et telis repulsi, hoc conatu destiterunt.",
                    translationes: {
                        es: '<strong>Español</strong>: Los helvecios, frustrados en esa esperanza, unidas sus naves y hechas varias balsas, otros por los vados del Ródano, por donde la profundidad del río era mínima, habiendo intentado, a veces de día, más a menudo de noche, por si podían abrirse paso, rechazados por la fortificación de la obra, por el concurso de los soldados y por los proyectiles, desistieron de este intento.',
                        en: '<strong>English</strong>: The Helvetii, disappointed in that hope, with their boats joined together and several rafts made, others by the fords of the Rhone, where the depth of the river was minimal, having tried, sometimes by day, more often by night, if they could break through, repulsed by the fortification of the work, by the charge of the soldiers, and by the weapons, they desisted from this attempt.',
                        zh: '<strong>中文（繁體）</strong>: 赫爾維蒂人希望破滅後，便將船隻連接起來，造了許多木筏，另一些人則試圖從羅納河水最淺的渡口渡河，他們有時在白天，更常在夜間，試圖突破，但被工事的防禦、士兵的奔赴和投擲武器所擊退，於是放棄了這個嘗試。',
                        ko: '<strong>한국어</strong>: 헬베티족은 그 희망이 꺾이자, 배들을 잇고 여러 뗏목을 만들었으며, 다른 이들은 강의 수심이 가장 얕았던 론 강의 여울을 통해, 때로는 낮에, 더 자주 밤에 돌파할 수 있는지 시도해 보았으나, 방어 공사와 병사들의 달려옴과 투창에 의해 격퇴되어 이 시도를 단념했다.'
                    },
                    analysis_syntactica: `<p><strong>Propositio Principalis:</strong> Helvetii... hoc conatu destiterunt.</p><ul><li><strong>Subiectum:</strong> Helvetii.</li><li><strong>Praedicātum:</strong> destiterunt.</li><li><strong>Participia coniūncta (ad Helvetii referentia):</strong> deiecti, conati, repulsi.</li><li><strong>Ablātīvī absolūtī:</strong> navibus iunctis, ratibusque compluribus factis.</li><li><strong>Claūsula relātīva (locī):</strong> qua minima altitudo fluminis erat.</li><li><strong>Claūsula condicionālis (in oratione obliqua intra participium):</strong> si perrumpere possent.</li></ul>`,
                    verba: [
                        { id_verbi: 'v4_c8_1', terminus: 'Helvetii', analysis_morphologicus: 'Nōmen, masculīnum, plūrālis, nōminātīvus', significationes: { es: 'Los helvecios', en: 'The Helvetii', zh: '赫爾維蒂人', ko: '헬베티족은' } },
                        { id_verbi: 'v4_c8_2', terminus: 'ea spe deiecti', analysis_morphologicus: 'Participium coniūnctum', significationes: { es: 'frustrados en esa esperanza', en: 'disappointed in that hope', zh: '因那希望而失望', ko: '그 희망에 실망하여' } },
                        { id_verbi: 'v4_c8_3', terminus: 'navibus iunctis', analysis_morphologicus: 'Ablātīvus absolūtus', significationes: { es: 'unidas sus naves', en: 'with boats joined together', zh: '連接船隻後', ko: '배들을 연결하여' } },
                        { id_verbi: 'v4_c8_4', terminus: 'ratibusque compluribus factis', analysis_morphologicus: 'Ablātīvus absolūtus', significationes: { es: 'y hechas varias balsas', en: 'and with several rafts made', zh: '並製造了許多木筏後', ko: '그리고 많은 뗏목을 만들어' } },
                        { id_verbi: 'v4_c8_5', terminus: 'alii vadis Rhodani', analysis_morphologicus: 'Pronomēn + Ablātīvus', significationes: { es: 'otros por los vados del Ródano', en: 'others by the fords of the Rhone', zh: '其他人則經由羅納河的淺灘', ko: '다른 이들은 론 강의 얕은 곳으로' } },
                        { id_verbi: 'v4_c8_6', terminus: 'qua minima altitudo fluminis erat', analysis_morphologicus: 'Claūsula relātīva', significationes: { es: 'por donde la profundidad del río era mínima', en: 'where the depth of the river was minimal', zh: '那裡是...', ko: '그곳은...였다' } },
                        { id_verbi: 'v4_c8_7', terminus: 'non numquam interdiu', analysis_morphologicus: 'Locutiō adverbialis', significationes: { es: 'a veces de día', en: 'sometimes by day', zh: '有時在白天', ko: '때로는 낮에' } },
                        { id_verbi: 'v4_c8_8', terminus: 'saepius noctu', analysis_morphologicus: 'Locutiō adverbialis', significationes: { es: 'más a menudo de noche', en: 'more often by night', zh: '更常在夜間', ko: '더 자주 밤에' } },
                        { id_verbi: 'v4_c8_9', terminus: 'si perrumpere possent conati', analysis_morphologicus: 'Condiciō in oratione obliqua + Participium perfectum dēpōnēns', significationes: { es: 'habiendo intentado, por si podían abrirse paso', en: 'having tried, if they could break through', zh: '嘗試後', ko: '시도했으나' } },
                        { id_verbi: 'v4_c8_10', terminus: 'operis munitione', analysis_morphologicus: 'Ablātīvus instrumentī', significationes: { es: 'por la fortificación de la obra', en: 'by the fortification of the work', zh: '因工事的防禦', ko: '공사의 방어시설로' } },
                        { id_verbi: 'v4_c8_11', terminus: 'et militum concursu', analysis_morphologicus: 'Ablātīvus instrumentī', significationes: { es: 'por el concurso de los soldados', en: 'by the charge of the soldiers', zh: '因士兵的奔赴', ko: '병사들의 달려옴으로' } },
                        { id_verbi: 'v4_c8_12', terminus: 'et telis repulsi', analysis_morphologicus: 'Ablātīvus instrumentī + Participium perfectum passīvum', significationes: { es: 'y por los proyectiles, rechazados', en: 'and by the weapons, having been repulsed', zh: '和投擲武器', ko: '그리고 투창으로' } },
                        { id_verbi: 'v4_c8_13', terminus: 'hoc conatu destiterunt', analysis_morphologicus: 'Ablātīvus separātiōnis + Verbum, perfectum, indicātīvus, āctīvus, tertia persōna, plūrālis', significationes: { es: 'desistieron de este intento', en: 'they desisted from this attempt', zh: '他們放棄了', ko: '그들은 단념했다' } }
                    ]
                }
            ]
        };
        
        const paragrafusContentus = document.getElementById('paragrafus-contentus');
        const marginaliaContentus = document.getElementById('marginalia-contentus');
        const visusParagrafi = document.getElementById('visus-paragrafi');
        const visusOrationis = document.getElementById('visus-orationis');
        const buttonRedire = document.getElementById('button-redire');
        const oratioLatinaTextus = document.getElementById('oratio-latina-textus');
        const translatioES = document.getElementById('translatio-es');
        const translatioEN = document.getElementById('translatio-en');
        const translatioZH = document.getElementById('translatio-zh');
        const translatioKO = document.getElementById('translatio-ko');
        const analysisSyntacticaContentus = document.getElementById('analysis-syntactica-contentus');
        const linguaSelector = document.getElementById('lingua-selector');
        const tooltip = document.getElementById('translatio-tooltip');
        let linguaPraefecta = 'es';

        function monstraContentusDefectu() {
            marginaliaContentus.innerHTML = `
                <h3 class="text-xl font-semibold text-gray-800 mb-4">Analysis Morphologica</h3>
                <div class="space-y-2 text-gray-600">
                    <p><strong>ES:</strong> Selecciona una palabra para ver su análisis.</p>
                    <p><strong>EN:</strong> Select a word to see its analysis.</p>
                    <p><strong>中文:</strong> 選擇一個詞以查看其分析。</p>
                    <p><strong>KO:</strong> 단어를 선택하여 분석을 확인하세요。</p>
                </div>
            `;
        }

        function reddeParagrafum() {
            paragrafusContentus.innerHTML = '';
            paragrafus.orationes.forEach(oratio => {
                const oratioSpan = document.createElement('span');
                oratioSpan.className = 'oratio';
                oratioSpan.dataset.oratioId = oratio.id_orationis;

                let textusTemporarius = oratio.textus_latinus;
                // Ordenar las palabras por longitud descendente para evitar reemplazos parciales de palabras más largas
                const verbaSorted = [...oratio.verba].sort((a,b) => b.terminus.length - a.terminus.length);

                verbaSorted.forEach(verbum => {
                    // Usar una expresión regular para reemplazar solo la palabra completa y evitar conflictos con HTML ya insertado
                    // (?![^<]*?>) asegura que no se reemplace dentro de una etiqueta HTML
                    const regex = new RegExp(`\\b${verbum.terminus.replace(/[-\/\\^$*+?.()|[\]{}]/g, '\\$&')}\\b(?![^<]*?>)`, 'g');
                    const replacement = `<span class="verbum" data-verbum-id="${verbum.id_verbi}">${verbum.terminus}</span>`;
                    textusTemporarius = textusTemporarius.replace(regex, replacement);
                });

                oratioSpan.innerHTML = textusTemporarius + ' ';
                oratioSpan.addEventListener('mouseenter', monstraTooltip);
                oratioSpan.addEventListener('mouseleave', occultaTooltip);
                oratioSpan.addEventListener('mousemove', moveTooltip);
                paragrafusContentus.appendChild(oratioSpan);
            });
        }

        function monstraAnalyseonVerbi(verbumId) {
            let verbumData = null;
            for (const oratio of paragrafus.orationes) {
                verbumData = oratio.verba.find(v => v.id_verbi === verbumId);
                if (verbumData) break;
            }
            if (!verbumData) return;

            marginaliaContentus.innerHTML = `
                <h3 class="text-2xl textum-classicum text-gray-800 mb-4">${verbumData.terminus}</h3>
                <div class="space-y-4">
                    <div>
                        <h4 class="font-bold text-sm uppercase text-gray-500 tracking-wider">Analysis Morphologica</h4>
                        <p class="text-gray-700 mt-1">${verbumData.analysis_morphologicus}</p>
                    </div>
                    <div>
                        <h4 class="font-bold text-sm uppercase text-gray-500 tracking-wider">Significationes</h4>
                        <ul class="list-disc list-inside mt-2 space-y-1 text-gray-700">
                            <li><strong>ES:</strong> ${verbumData.significationes.es}</li>
                            <li><strong>EN:</strong> ${verbumData.significationes.en}</li>
                            <li><strong>中文:</strong> ${verbumData.significationes.zh}</li>
                            <li><strong>KO:</strong> ${verbumData.significationes.ko}</li>
                        </ul>
                    </div>
                </div>
            `;
        }
        
        function monstraAnalyseonOrationis(oratioId) {
            const oratioData = paragrafus.orationes.find(o => o.id_orationis === oratioId);
            if (!oratioData) return;

            oratioLatinaTextus.textContent = oratioData.textus_latinus;
            translatioES.innerHTML = oratioData.translationes.es;
            translatioEN.innerHTML = oratioData.translationes.en;
            translatioZH.innerHTML = oratioData.translationes.zh;
            translatioKO.innerHTML = oratioData.translationes.ko;
            analysisSyntacticaContentus.innerHTML = oratioData.analysis_syntactica;
            
            document.querySelector('.main-layout').classList.add('occultus');
            visusOrationis.classList.remove('occultus');
            window.scrollTo(0, 0);
        }

        function initialisareLinguam() {
            const linguaServata = localStorage.getItem('linguaPraefecta') || 'es';
            linguaPraefecta = linguaServata;
            const radioInput = document.querySelector(`#lingua-selector input[value="${linguaServata}"]`);
            if (radioInput) {
                radioInput.checked = true;
            }
        }

        function mutareLinguam(event) {
            linguaPraefecta = event.target.value;
            localStorage.setItem('linguaPraefecta', linguaPraefecta);
        }
        
        function monstraTooltip(event) {
            const oratioId = event.currentTarget.dataset.oratioId;
            const oratioData = paragrafus.orationes.find(o => o.id_orationis === oratioId);
            if (oratioData && oratioData.translationes[linguaPraefecta]) {
                const translatioTextus = oratioData.translationes[linguaPraefecta].replace(/<strong>.*?<\/strong>:\s*/, '');
                tooltip.textContent = translatioTextus;
                tooltip.style.display = 'block';
            }
        }

        function occultaTooltip() {
            tooltip.style.display = 'none';
        }

        function moveTooltip(event) {
            tooltip.style.left = `${event.pageX + 15}px`;
            tooltip.style.top = `${event.pageY + 15}px`;
        }

        paragrafusContentus.addEventListener('click', (e) => {
            const verbumTarget = e.target.closest('.verbum');
            const oratioTarget = e.target.closest('.oratio');

            if (verbumTarget) {
                e.stopPropagation();
                document.querySelectorAll('.activus').forEach(el => el.classList.remove('activus'));
                monstraAnalyseonVerbi(verbumTarget.dataset.verbumId);
                verbumTarget.classList.add('activus');
            } else if (oratioTarget) {
                monstraAnalyseonOrationis(oratioTarget.dataset.oratioId);
            }
        });

        buttonRedire.addEventListener('click', () => {
            visusOrationis.classList.add('occultus');
            document.querySelector('.main-layout').classList.remove('occultus');
        });

        linguaSelector.addEventListener('change', mutareLinguam);

        initialisareLinguam();
        reddeParagrafum();
        monstraContentusDefectu(); // Muestra el contenido por defecto al cargar
    });
    </script>
</body>
</html>
